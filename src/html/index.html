<!DOCTYPE html>
<html>
    <meta name="color-scheme" content="light dark">
    
    <head>
        
        <style>
            .container {
                font-family: arial;
                font-size: 24px;
                margin: 25px;
                width: 100%;
            }

            p {
                text-align: center;
            }
        </style>

    </head>
    
    <body>
        <div class="container">
            <p>How Late is the Wan Show?</p>
            <p>
                <label id="title">The wan show is </label><label id="status">time</label></label id="time"></label>
            </p>
        </div>
		
        <script type="module">
			let now = new Date()
			let wanStart = new Date( Date.UTC( now.getFullYear(), now.getMonth(), now.getDate(), 24, 0, 0, 0 ) )
			

			//function to continually update the time
			async function updateTime() {
				now = new Date()
				let deltaTime = now.getTime() - wanStart.getTime()
				console.log(deltaTime)
				document.getElementById("time").innerHTML = new Date(deltaTime)
				await setTimeout(async() => {await updateTime()}, 1000)
			}

            //get the status of the WAN show
            let status = await fetch(`${window.location}status`)
            status = await status.text()
            document.getElementById("status").innerHTML = status
            //continually update the status of the wan show
			if(status == "late") {
				// while(true) {
				await updateTime()
					// await setTimeout(1000, () => {})
				// }
			}
			
        </script>
    </body>

</html>